function fisherYates(n){var t=n.length,i,r,u;if(t==0)return!1;while(--t)i=Math.floor(Math.random()*(t+1)),r=n[t],u=n[i],n[t]=u,n[i]=r}var jsonified;app.controller("QuizModeCtrl",["$scope","$location","$log",function(n,t,i){i.info("initializing QuizModeCtrl"),i.info(n.selectionInfo),n.anotherTopic=function(){i.info("Another Topic"),n.sortTopics(),n.selectionInfo.selectedEntrySet=n.jsonified[0],n.quizOnArray(n.selectionInfo.selectedEntrySet)};var r=function(n,t){return n+t};n.next=function(){i.info("Next clicked"),n.selectionInfo.selectedEntryIndex++,n.selectionInfo.selectedEntryIndex>=n.selectionInfo.selectedEntrySet.entries.length&&t.path("/browse")},n.deleteEntry=function(){i.info("About to delete");var t=n.selectionInfo.selectedEntrySet,r=n.selectionInfo.selectedEntry;t.entries.splice(t.entries.indexOf(r),1),n.next()},n.google=function(){i.info("About to Google"),window.open("https://www.google.com/?q="+n.selectionInfo.selectedEntry.text,"_blank")}}]),app.controller("QuizCtrl",["$scope","$location","$log",function(n,t,i){i.info("initializing outer QuizModeCtrl"),n.jsonified=jsonified,n.jsonified.forEach(function(n){n.entries=n.entries.filter(function(n){return n.text.length>0})}),i.info("Randomizing order of sets"),n.sortTopics=function(){fisherYates(n.jsonified)},n.sortTopics(),n.selectionInfo||(n.selectionInfo={selectedEntrySet:null,selectedEntry:null,selectedEntryIndex:-1}),n.editMode=!1,n.init=function(){i.info("Initting")},n.openTopic=function(t){n.editMode=!1,n.quizOnArray(t),location.hash="quiz"},n.quizOnArray=function(t){i.info("About to quiz"),n.selectionInfo.selectedEntrySet=t,fisherYates(n.selectionInfo.selectedEntrySet),n.selectionInfo.selectedEntryIndex=0,n.selectionInfo.selectedEntry=n.selectionInfo.selectedEntrySet.entries[n.selectionInfo.selectedEntryIndex]},n.$watch("selectionInfo.selectedEntryIndex",function(t){i.info("selectionInfo.selectedEntryIndex "+t),n.selectionInfo.selectedEntrySet&&(n.selectionInfo.selectedEntry=n.selectionInfo.selectedEntrySet.entries[t])}),n.editSelected=function(t){i.info("Editing"),n.selectionInfo.selectedEntrySet=t,n.editMode=!0},n.recreateJson=function(){var n=jsonified.map(function(n){return{name:n.name,dateReviewed:new Date,entries:n.entries}});i.info(angular.toJson(n))},n.getScope=function(){return{selectedEntry:n.selectionInfo.selectedEntry,setName:n.selectionInfo.selectedEntrySet?n.selectionInfo.selectedEntrySet.name:"",selectedEntrySetLength:n.selectionInfo.selectedEntrySet?n.selectionInfo.selectedEntrySet.entries.length:1,selectedEntryIndex:n.selectionInfo.selectedEntryIndex}},n.initAddMode=function(){n.addMode=!0},n.add=function(){var u,t,f,r;i.info("Adding content"),u=n.newContent,t=n.newContent.split("\n"),i.info(t),f=t.map(function(n){return{name:n.name,dateReviewed:new Date,entries:n.entries}}),r={name:n.entryName,dateReviewed:new Date,entries:t.map(function(n){return{text:n}})},n.jsonified.push(r),n.entryName="",n.newContent="",n.addMode=!1},n.newestFirst=function(){function t(n){return n?new Date(n.toString()):new Date("01/01/2001")}n.jsonified.sort(function(n,i){return t(i.dateReviewed)-t(n.dateReviewed)})}}]);var Topic=function(){function n(){}return n}(),Entry=function(){function n(){}return n}(),SelectionInfo=function(){function n(){}return n}()